(function(q){"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.amd?define([],q):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).rfc6902=q()})(function(){return function m(p,d,f){function n(c,a){if(!d[c]){if(!p[c]){var b="function"==typeof require&&require;if(!a&&b)return b(c,!0);if(h)return h(c,!0);b=Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b;}b=d[c]={exports:{}};
p[c][0].call(b.exports,function(b){var a=p[c][1][b];return n(a?a:b)},b,b.exports,m,p,d,f)}return d[c].exports}for(var h="function"==typeof require&&require,l=0;l<f.length;l++)n(f[l]);return n}({1:[function(m,p,d){function f(b,c){var a={},e;for(e in b)a[e]=1;for(var g in c)delete a[g];return Object.keys(a)}function n(b){var c={};b.forEach(function(b){for(var a in b)c[a]=(c[a]||0)+1});b=b.length;for(var a in c)c[a]<b&&delete c[a];return Object.keys(c)}function h(b){return void 0===b?"undefined":null===
b?"null":Array.isArray(b)?"array":typeof b}function l(c,a,d){function k(b,e){var g=l[b+","+e];if(void 0===g){if(r(c[b-1],a[e-1]))g=k(b-1,e-1);else{g=[];if(0<b){var d=k(b-1,e);g.push({operations:d.operations.concat({op:"remove",index:b-1}),cost:d.cost+1})}0<e&&(d=k(b,e-1),g.push({operations:d.operations.concat({op:"add",index:b-1,value:a[e-1]}),cost:d.cost+1}));0<b&&0<e&&(d=k(b-1,e-1),g.push({operations:d.operations.concat({op:"replace",index:b-1,original:c[b-1],value:a[e-1]}),cost:d.cost+1}));g=g.sort(function(b,
c){return b.cost-c.cost})[0]}l[b+","+e]=g}return g}var l={"0,0":{operations:[],cost:0}},h=isNaN(c.length)||0>=c.length?0:c.length,f=isNaN(a.length)||0>=a.length?0:a.length,f=k(h,f).operations.reduce(function(c,a){var k=e(c,2),l=k[0],k=k[1];if("add"===a.op){var f=a.index+1+k,f={op:a.op,path:d.add(f<h+k?String(f):"-").toString(),value:a.value};return[l.concat(f),k+1]}if("remove"===a.op)return f={op:a.op,path:d.add(String(a.index+k)).toString()},[l.concat(f),k-1];f=d.add(String(a.index+k));f=b(a.original,
a.value,f);return[l.concat.apply(l,g(f)),k]},[[],0]);return e(f,2)[0]}function c(a,c,e){var d=[];f(a,c).forEach(function(b){d.push({op:"remove",path:e.add(b).toString()})});f(c,a).forEach(function(b){d.push({op:"add",path:e.add(b).toString(),value:c[b]})});n([a,c]).forEach(function(k){d.push.apply(d,g(b(a[k],c[k],e.add(k))))});return d}function a(b,a,c){return r(b,a)?[]:[{op:"replace",path:c.toString(),value:a}]}function b(b,e,g){var d=h(b),k=h(e);return"array"==d&&"array"==k?l(b,e,g):"object"==d&&
"object"==k?c(b,e,g):a(b,e,g)}var e=function(b,a){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b)){for(var c=[],e=b[Symbol.iterator](),g;!(g=e.next()).done&&(c.push(g.value),!a||c.length!==a););return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");},g=function(b){if(Array.isArray(b)){for(var a=0,c=Array(b.length);a<b.length;a++)c[a]=b[a];return c}return Array.from(b)};d.isDestructive=function(b){b=b.op;return"remove"===b||"replace"===b||"copy"===b||"move"===
b};d.subtract=f;d.intersection=n;d.objectType=h;d.diffArrays=l;d.diffObjects=c;d.diffValues=a;d.diffAny=b;Object.defineProperty(d,"__esModule",{value:!0});var r=m("./equal").compare},{"./equal":2}],2:[function(m,p,d){function f(c,a){for(var b=[],e=0,g=c.length;e<g;e++)b.push([c[e],a[e]]);return b}function n(c,a){return c.length!==a.length?!1:f(c,a).every(function(b){return l(b[0],b[1])})}function h(c,a){var b=Object.keys(c),e=Object.keys(a);return n(b,e)?b.every(function(b){return l(c[b],a[b])}):
!1}function l(c,a){return c===a?!0:Array.isArray(c)&&Array.isArray(a)?n(c,a):Object(c)===c&&Object(a)===a?h(c,a):!1}d.compare=l;Object.defineProperty(d,"__esModule",{value:!0})},{}],3:[function(m,p,d){var f=function c(a,b,e){var g=Object.getOwnPropertyDescriptor(a,b);if(void 0===g){if(a=Object.getPrototypeOf(a),null!==a)return c(a,b,e)}else{if("value"in g&&g.writable)return g.value;b=g.get;return void 0===b?void 0:b.call(e)}},n=function(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+
typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});a&&(c.__proto__=a)},h=function(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function");};Object.defineProperty(d,"__esModule",{value:!0});d.MissingError=function(c){function a(b){h(this,a);f(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Value required at path: "+b);this.path=b;this.name=this.constructor.name}n(a,c);return a}(Error);d.InvalidOperationError=
function(c){function a(b){h(this,a);f(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Invalid operation: "+b);this.op=b;this.name=this.constructor.name}n(a,c);return a}(Error);d.TestError=function(c){function a(b,c){h(this,a);f(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,"Test failed: "+b+" != "+c);this.actual=b;this.expected=c;this.name=this.constructor.name;this.actual=b;this.expected=c}n(a,c);return a}(Error)},{}],4:[function(m,p,d){function f(b,a){var c=
h.fromJSON(a).evaluate(b);if(void 0!==c)return{op:"test",path:a,value:c.value}}d.applyPatch=function(b,a){return a.map(function(a){var c=l[a.op];return void 0===c?new n(a.op):c(b,a)})};d.createPatch=function(b,a){var e=new h;return c(b,a,e)};d.createTests=function(b,c){var e=[];c.filter(a).forEach(function(a){var c=f(b,a.path);c&&e.push(c);"from"in a&&(a=f(b,a.from))&&e.push(a)});return e};Object.defineProperty(d,"__esModule",{value:!0});var n=m("./errors").InvalidOperationError,h=m("./pointer").Pointer,
l=function(b){return b&&b.__esModule?b:{"default":b}}(m("./patch"));m=m("./diff");var c=m.diffAny,a=m.isDestructive},{"./diff":1,"./errors":3,"./patch":5,"./pointer":6}],5:[function(m,p,d){function f(b,a,c){Array.isArray(b)?"-"==a?b.push(c):b.splice(a,0,c):b[a]=c}function n(b,a){Array.isArray(b)?b.splice(a,1):delete b[a]}d.add=function(b,a){var e=h.fromJSON(a.path).evaluate(b);if(void 0===e.parent)return new c(a.path);f(e.parent,e.key,a.value);return null};d.remove=function(b,a){var e=h.fromJSON(a.path).evaluate(b);
if(void 0===e.value)return new c(a.path);n(e.parent,e.key);return null};d.replace=function(b,a){var e=h.fromJSON(a.path).evaluate(b);if(void 0===e.value)return new c(a.path);e.parent[e.key]=a.value;return null};d.move=function(a,e){var b=h.fromJSON(e.from).evaluate(a);if(void 0===b.value)return new c(e.from);var d=h.fromJSON(e.path).evaluate(a);if(void 0===d.parent)return new c(e.path);n(b.parent,b.key);f(d.parent,d.key,b.value);return null};d.copy=function(a,e){var b=h.fromJSON(e.from).evaluate(a);
if(void 0===b.value)return new c(e.from);var d=h.fromJSON(e.path).evaluate(a);if(void 0===d.parent)return new c(e.path);n(b.parent,b.key);f(d.parent,d.key,b.value);return null};d.test=function(b,c){var e=h.fromJSON(c.path).evaluate(b);return l(e.value,c.value)?null:new a(e.value,c.value)};Object.defineProperty(d,"__esModule",{value:!0});var h=m("./pointer").Pointer,l=m("./equal").compare;m=m("./errors");var c=m.MissingError,a=m.TestError},{"./equal":2,"./errors":3,"./pointer":6}],6:[function(m,p,
d){function f(d){return d.replace(/~1/g,"/").replace(/~0/g,"~")}function n(d){return d.replace(/~/g,"~0").replace(/\//g,"~1")}var h=function(){function d(c,a){for(var b in a){var e=a[b];e.configurable=!0;e.value&&(e.writable=!0)}Object.defineProperties(c,a)}return function(c,a,b){a&&d(c.prototype,a);b&&d(c,b);return c}}();Object.defineProperty(d,"__esModule",{value:!0});d.Pointer=function(){function d(c){c=void 0===c?[""]:c;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
this.tokens=c}h(d,{toString:{value:function(){return this.tokens.map(n).join("/")}},evaluate:{value:function(c){for(var a=null,b=null,d=1,f=this.tokens.length;d<f;d++)a=c,b=this.tokens[d],c=(a||{})[b];return{parent:a,key:b,value:c}}},push:{value:function(c){this.tokens.push(c)}},add:{value:function(c){c=this.tokens.concat(String(c));return new d(c)}}},{fromJSON:{value:function(c){var a=c.split("/").map(f);if(""!==a[0])throw Error("Invalid JSON Pointer: "+c);return new d(a)}}});return d}()},{}]},{},
[4])(4)});
